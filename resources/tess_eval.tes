#version 410

layout(isolines) in; //Tells shader that it is tessellation line objects
in vec3 tcPosition[];
uniform mat4 projection_mat, view_mat;

vec3 bezier(vec3 p0, vec3 p1, vec3 p2, vec3 p3, float t) {
    vec3 position = pow((1.0-t), 3.0) * p0 + 3.0 * pow((1.0-t), 2.0) * t * p1 +
        3.0 * (1.0-t) * pow(t, 2.0) * p2 + pow(t, 3.0) * p3;
    return position;
}

void main() {
    vec3 p0 = gl_in[0].gl_Position.xyz;
    vec3 p1 = gl_in[1].gl_Position.xyz;
    vec3 p2 = gl_in[2].gl_Position.xyz;
    vec3 p3 = gl_in[3].gl_Position.xyz;
    float t = gl_TessCoord.x; //Tells us where we are in the line patch, only need x because it is a line
    vec3 tesPosition = bezier(p0, p1, p2, p3, t);
    gl_Position = vec4(tesPosition, 1.0);
}
